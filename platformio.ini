[platformio]
default_envs = esp32s3

[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

monitor_speed = 115200
monitor_port = COM4
upload_port  = COM4

board_build.filesystem  = littlefs
board_build.partitions  = Custom.csv

build_flags =
  -std=gnu++17
  -D ARDUINO_USB_MODE=1
  -D ARDUINO_USB_CDC_ON_BOOT=1

  ; ============================
  ; K2 DEBUG SYSTEM (MASTER)
  ; ============================
  -D K2_DEBUG_ENABLE=1

  ; ============================
  ; OUTPUT TARGETS
  ; ============================
  -D K2_DEBUG_UART=1
  -D K2_DEBUG_TCP=1
  -D K2_DEBUG_WEBSOCKET=1
  -D K2_DEBUG_SD=1

  ; ============================
  ; LOG DECORATION
  ; ============================
  -D K2_DEBUG_TIMESTAMP=1
  -D K2_DEBUG_MODULE_TAGS=1
  -D K2_DEBUG_FILE_LINE=1

  ; ============================
  ; LOG LEVELS (compile-time)
  ; 0=OFF 1=ERR 2=WARN 3=INFO 4=DBG 5=TRACE
  ; ============================
  -D K2_LOG_LEVEL_DEFAULT=4
  -D K2_LOG_LEVEL_MAIN=4
  -D K2_LOG_LEVEL_WIFI=4
  -D K2_LOG_LEVEL_WEB=4
  -D K2_LOG_LEVEL_TCP=4
  -D K2_LOG_LEVEL_UART=4
  -D K2_LOG_LEVEL_STORAGE=4
  -D K2_LOG_LEVEL_BACKUP=4
  -D K2_LOG_LEVEL_RESTORE=4
  -D K2_LOG_LEVEL_OTA=4
  -D K2_LOG_LEVEL_ENV=4
  -D K2_LOG_LEVEL_UBOOT=4
  -D K2_LOG_LEVEL_BLUEPRINT=4

  -D K2_DEBUG_ENABLE=1
  -D DEBUG_MAIN=1
  -D DEBUG_UART=1
  -D DEBUG_WIFI=1
  -D DEBUG_BACKUP=0
  -D DEBUG_RESTORE=0
  -D DEBUG_WEB=0

lib_ldf_mode = chain+

lib_deps =
  esphome/ESPAsyncWebServer-esphome@^3.4.0
  esphome/AsyncTCP-esphome@^2.1.4
  bblanchon/ArduinoJson@^7.4.2
  https://github.com/AirysDark/Arduino_K2FW_library/archive/refs/tags/1.1.1.zip